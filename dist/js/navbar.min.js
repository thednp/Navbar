// Navbar.js v3.1.0alpha1 | thednp Â© 2022 | MIT-License
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).Navbar=t()}(this,(function(){"use strict";const e=e=>e&&1===e.nodeType||!1,t=new Map,n=(n,o,i,s)=>{if(e(n))if(s&&s.length){t.has(n)||t.set(n,new Map);t.get(n).set(s,setTimeout(o,i))}else t.set(n,setTimeout(o,i))},o=(n,o)=>{if(!e(n))return null;const i=t.get(n);return o&&o.length&&i&&i.get?i.get(o)||null:i||null},i=(n,o)=>{if(e(n))if(o&&o.length){const e=t.get(n);e&&e.get&&(clearTimeout(e.get(o)),e.delete(o),0===e.size&&t.delete(n))}else clearTimeout(t.get(n)),t.delete(n)},s=e=>e&&[1,2,3,4,5,6,7,8,9,10,11].some(t=>+e.nodeType===t)||!1,r=e=>e&&9===e.nodeType||!1;function a(e){return r(e)?e:s(e)?e.ownerDocument:(t=e)&&"Window"===t.constructor.name?e.document:window.document;var t}function l(e){return e?r(e)?e.defaultView:s(e)?e.ownerDocument.defaultView:e:window}function c(e,t){const n=getComputedStyle(e);return t.includes("--")?n.getPropertyValue(t):n[t]}const u=(e,t)=>e.dispatchEvent(t);function f(e,t){let n=0;const o=new Event("transitionend"),i=function(e){const t=c(e,"transitionProperty"),n=c(e,"transitionDuration"),o=n.includes("ms")?1:1e3,i=t&&"none"!==t?parseFloat(n)*o:0;return Number.isNaN(i)?0:i}(e),s=function(e){const t=c(e,"transitionProperty"),n=c(e,"transitionDelay"),o=n.includes("ms")?1:1e3,i=t&&"none"!==t?parseFloat(n)*o:0;return Number.isNaN(i)?0:i}(e);if(i){const r=o=>{o.target===e&&(t.apply(e,[o]),e.removeEventListener("transitionend",r),n=1)};e.addEventListener("transitionend",r),setTimeout(()=>{n||u(e,o)},i+s+17)}else t.apply(e,[o])}const d={passive:!0};function p(e){return!!["true",!0].includes(e)||!["false",!1].includes(e)&&(""===e||"null"===e?null:""===e||Number.isNaN(+e)?e:+e)}const g=e=>Object.keys(e);const m=(e,t)=>Object.assign(e,t);function v(e,t){const n=new CustomEvent(e,{cancelable:!0,bubbles:!0});return"object"==typeof t&&m(n,t),n}const b=new Map,h={set:(t,n,o)=>{if(!e(t))return;b.has(n)||b.set(n,new Map);b.get(n).set(t,o)},getAllFor:e=>b.get(e)||null,get:(t,n)=>{if(!e(t)||!n)return null;const o=h.getAllFor(n);return t&&o&&o.get(t)||null},remove:(t,n)=>{const o=b.get(n);o&&e(t)&&(o.delete(t),0===o.size&&b.delete(n))}};function w(e,t){e.classList.add(t)}function E(e,t){return e.classList.contains(t)}function y(e,t){e.classList.remove(t)}const A=e=>"rtl"===function(e){return a(e).documentElement}(e).dir,L=(e,t,n)=>e.setAttribute(t,n);function N(e,t){return(s(t)?t:a()).getElementsByClassName(e)}function T(e,t){return(s(t)?t:a()).getElementsByTagName(e)}function x(e,t){return e?e.closest(t)||x(e.getRootNode().host,t):null}function z(e,t){return e.matches(t)}const C={};function D(e){const t=this,{type:n}=e;[...C[n]].forEach(o=>{const[i,s]=o;i===t&&[...s].forEach(t=>{const[o,s]=t;o.apply(i,[e]),s&&s.once&&S(i,n,o,s)})})}const R=(e,t,n,o)=>{C[t]||(C[t]=new Map);const i=C[t];i.has(e)||i.set(e,new Map);const s=i.get(e),{size:r}=s;s.set(n,o),r||e.addEventListener(t,D,o)},S=(e,t,n,o)=>{const i=C[t],s=i&&i.get(e),r=s&&s.get(n),{options:a}=void 0!==r?r:{options:o};s&&s.has(n)&&s.delete(n),!i||s&&s.size||i.delete(e),i&&i.size||delete C[t],s&&s.size||e.removeEventListener(t,D,a)};const M='[data-function="navbar"]',P="open",k="open-mobile",j={breakpoint:768,toggleSiblings:!0,delay:500},F=v("show.navbar"),I=v("shown.navbar"),O=v("hide.navbar"),U=v("hidden.navbar"),V=e=>{return t=e,n="Navbar",h.get(t,n);var t,n};function B(e,t){(t?R:S)(l(e.menu),"resize",e.listenResize,d)}function W(e){const{options:t,menu:n}=e,[o]=N("subnav-toggle",n);return o&&"none"!==c(o,"display")||l(n).innerWidth<t.breakpoint}function q(e,t){const n=t?R:S,{items:o,navbarToggle:i,menu:s}=e;[...o].forEach(e=>{const{lastElementChild:t}=e;t&&E(t,"subnav")&&(n(e,"mouseenter",Q),n(e,"mouseleave",X));const[o]=N("subnav-toggle",e);o&&n(o,"click",K)}),n(s,"keydown",J),i&&n(i,"click",K)}function Z(e,t){return[...e.children].find(e=>z(e,t))}function G(e,t){const n=Z(e,".subnav"),o=Z(e,"A"),s=Z(e,"subnav-toggle");if(!([P,k].some(t=>E(e,t))&&o&&(u(o,O),O.defaultPrevented))){if(E(e,P)){const s=()=>{y(e,"open-position"),i(e,"out"),o&&(u(o,U),L(o,"aria-expanded","false"))};y(e,P),t&&n?f(n,s):s()}E(e,k)&&(y(e,k),[s,o].forEach(e=>{e&&L(e,"aria-expanded","false")}),o&&u(o,U))}}function H(e){[...e].forEach(G)}function J(e){const{code:t}=e,{activeElement:n}=a(this),o=V(this);if(!o||!n||!this.contains(n))return;const i=x(n,"LI");if(!i)return;const s=W(o),{previousElementSibling:r,nextElementSibling:l}=i,u=x(i,"."+P),f=x(i,"UL"),[d]=N("subnav",i),p=["Space","ArrowDown","ArrowLeft","ArrowRight","ArrowUp"],g=f&&"column"===c(f,"flex-direction"),m=A(i),v=f&&r&&("ArrowUp"===t&&g||t===(m?"ArrowRight":"ArrowLeft")&&!g),b=f&&l&&("ArrowDown"===t&&g||t===(m?"ArrowLeft":"ArrowRight")&&!g);let h=null;if("Escape"===t&&u?(X.call(u),h=u):!s&&d&&"Space"===t&&(E(i,P)?X.call(i):Q.call(i)),v&&i!==f.firstElementChild?h=r:b&&i!==f.lastElementChild&&(h=l),h){const{firstElementChild:e}=h;e&&e.focus()}!s&&p.includes(t)&&e.preventDefault()}function K(e){e.preventDefault();const{target:t}=e,n=this,o=x(n,M+",.navbar"),i=o&&V(o);if(!i)return;const{options:s,navbarToggle:r}=i;if(t===n||n.contains(t)){const e=x(n,"LI")||o,t=x(n,".navbar-toggle")===r?r:Z(e,".subnav-toggle"),a=t===r?null:Z(e,"A"),l=N(k,e);if(E(e,k)){if(a&&(u(a,O),O.defaultPrevented))return;H(l),y(e,k),t&&(L(t,"aria-expanded","false"),t===r&&B(i)),a&&(L(a,"aria-expanded","false"),u(a,U))}else{if(a&&(u(a,F),F.defaultPrevented))return;if(t===r)B(i,!0);else{H(s.toggleSiblings?N(k,e.parentElement):l)}w(e,k),t&&L(t,"aria-expanded","true"),a&&(L(a,"aria-expanded","true"),u(a,I))}}}function Q(){const e=this,t=x(e,M+",.navbar"),s=t&&V(t),r=o(e,"out");if(s&&!W(s)&&(i(e,"out"),!E(e,P)&&!r)){n(e,()=>function(e){const t=Z(e,".subnav"),n=Z(e,"A");if(n&&(u(n,F),F.defaultPrevented))return;w(e,"open-position"),w(e,P);const{parentElement:o}=e;if(o){H([...N(P,o)].filter(t=>t!==e))}t&&f(t,()=>{i(e,"in"),n&&(u(n,I),L(n,"aria-expanded","true"))})}(e),17,"in")}}function X(){const e=this,t=x(e,M+",.navbar"),o=t&&V(t);if(o&&!W(o)&&E(e,P)){i(e,"in");n(e,()=>{H(N("open-position",e)),G(e,!0)},o.options.delay,"out")}}class Y{constructor(e,t){const n=this;var o,i;n.menu=s(o=e)?o:(s(i)?i:a()).querySelector(o);const{menu:r}=n;if(!r)return;const l=V(r);l&&l.dispose(),n.options=function(e,t,n,o){const i={...e.dataset},s={},r={};return g(i).forEach(e=>{const t=o&&e.includes(o)?e.replace(o,"").replace(/[A-Z]/,e=>e.toLowerCase()):e;r[t]=p(i[e])}),g(n).forEach(e=>{n[e]=p(n[e])}),g(t).forEach(o=>{s[o]=o in n?n[o]:o in r?r[o]:"title"===o?((e,t)=>e.getAttribute(t))(e,"title"):t[o]}),s}(r,j,t||{},""),n.items=T("LI",r),n.navbarToggle=null,[n.navbarToggle]=N("navbar-toggle",r),n.listenResize=n.listenResize.bind(n),q(n,!0),h.set(r,"Navbar",n)}get defaults(){return j}get version(){return"3.1.0alpha1"}get name(){return"Navbar"}listenResize(){const e=this;W(e)||(H(N(k,a(e.menu))),B(e))}dispose(){const e=this;H(e.items),q(e),B(e),h.remove(e.menu,"Navbar"),g(e).forEach(t=>{e[t]=null})}}m(Y,{selector:M,init:e=>new Y(e),getInstance:V});function $(e){const{selector:t,init:n}=Y;[...T("*",a(e))].filter(e=>z(e,t)).forEach(n)}return document.body?$():document.addEventListener("DOMContentLoaded",$,{once:!0}),Y}));
