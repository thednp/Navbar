// Navbar.js v3.1.0alpha1 | thednp Â© 2022 | MIT-License
const e=e=>e&&1===e.nodeType||!1,t=new Map,n=(n,o,s,i)=>{if(e(n))if(i&&i.length){t.has(n)||t.set(n,new Map);t.get(n).set(i,setTimeout(o,s))}else t.set(n,setTimeout(o,s))},o=(n,o)=>{if(!e(n))return null;const s=t.get(n);return o&&o.length&&s&&s.get?s.get(o)||null:s||null},s=(n,o)=>{if(e(n))if(o&&o.length){const e=t.get(n);e&&e.get&&(clearTimeout(e.get(o)),e.delete(o),0===e.size&&t.delete(n))}else clearTimeout(t.get(n)),t.delete(n)},i=e=>e&&[1,2,3,4,5,6,7,8,9,10,11].some(t=>+e.nodeType===t)||!1,r=e=>e&&9===e.nodeType||!1;function a(e){return r(e)?e:i(e)?e.ownerDocument:(t=e)&&"Window"===t.constructor.name?e.document:window.document;var t}function l(e){return e?r(e)?e.defaultView:i(e)?e.ownerDocument.defaultView:e:window}function c(e,t){const n=getComputedStyle(e);return t.includes("--")?n.getPropertyValue(t):n[t]}const u=(e,t)=>e.dispatchEvent(t);function d(e,t){let n=0;const o=new Event("transitionend"),s=function(e){const t=c(e,"transitionProperty"),n=c(e,"transitionDuration"),o=n.includes("ms")?1:1e3,s=t&&"none"!==t?parseFloat(n)*o:0;return Number.isNaN(s)?0:s}(e),i=function(e){const t=c(e,"transitionProperty"),n=c(e,"transitionDelay"),o=n.includes("ms")?1:1e3,s=t&&"none"!==t?parseFloat(n)*o:0;return Number.isNaN(s)?0:s}(e);if(s){const r=o=>{o.target===e&&(t.apply(e,[o]),e.removeEventListener("transitionend",r),n=1)};e.addEventListener("transitionend",r),setTimeout(()=>{n||u(e,o)},s+i+17)}else t.apply(e,[o])}const f={passive:!0};function g(e){return!!["true",!0].includes(e)||!["false",!1].includes(e)&&(""===e||"null"===e?null:""===e||Number.isNaN(+e)?e:+e)}const p=e=>Object.keys(e);const m=(e,t)=>Object.assign(e,t);function v(e,t){const n=new CustomEvent(e,{cancelable:!0,bubbles:!0});return"object"==typeof t&&m(n,t),n}const b=new Map,h={set:(t,n,o)=>{if(!e(t))return;b.has(n)||b.set(n,new Map);b.get(n).set(t,o)},getAllFor:e=>b.get(e)||null,get:(t,n)=>{if(!e(t)||!n)return null;const o=h.getAllFor(n);return t&&o&&o.get(t)||null},remove:(t,n)=>{const o=b.get(n);o&&e(t)&&(o.delete(t),0===o.size&&b.delete(n))}};function w(e,t){e.classList.add(t)}function E(e,t){return e.classList.contains(t)}function y(e,t){e.classList.remove(t)}const A=e=>"rtl"===function(e){return a(e).documentElement}(e).dir,L=(e,t,n)=>e.setAttribute(t,n);function N(e,t){return(i(t)?t:a()).getElementsByClassName(e)}function T(e,t){return(i(t)?t:a()).getElementsByTagName(e)}function z(e,t){return e?e.closest(t)||z(e.getRootNode().host,t):null}function x(e,t){return e.matches(t)}const C={};function D(e){const t=this,{type:n}=e;[...C[n]].forEach(o=>{const[s,i]=o;s===t&&[...i].forEach(t=>{const[o,i]=t;o.apply(s,[e]),i&&i.once&&S(s,n,o,i)})})}const R=(e,t,n,o)=>{C[t]||(C[t]=new Map);const s=C[t];s.has(e)||s.set(e,new Map);const i=s.get(e),{size:r}=i;i.set(n,o),r||e.addEventListener(t,D,o)},S=(e,t,n,o)=>{const s=C[t],i=s&&s.get(e),r=i&&i.get(n),{options:a}=void 0!==r?r:{options:o};i&&i.has(n)&&i.delete(n),!s||i&&i.size||s.delete(e),s&&s.size||delete C[t],i&&i.size||e.removeEventListener(t,D,a)};const M='[data-function="navbar"]',P="open",k="open-mobile",F={breakpoint:768,toggleSiblings:!0,delay:500},I=v("show.navbar"),j=v("shown.navbar"),O=v("hide.navbar"),U=v("hidden.navbar"),V=e=>{return t=e,n="Navbar",h.get(t,n);var t,n};function B(e,t){(t?R:S)(l(e.menu),"resize",e.listenResize,f)}function W(e){const{options:t,menu:n}=e,[o]=N("subnav-toggle",n);return o&&"none"!==c(o,"display")||l(n).innerWidth<t.breakpoint}function q(e,t){const n=t?R:S,{items:o,navbarToggle:s,menu:i}=e;[...o].forEach(e=>{const{lastElementChild:t}=e;t&&E(t,"subnav")&&(n(e,"mouseenter",Q),n(e,"mouseleave",X));const[o]=N("subnav-toggle",e);o&&n(o,"click",K)}),n(i,"keydown",J),s&&n(s,"click",K)}function Z(e,t){return[...e.children].find(e=>x(e,t))}function G(e,t){const n=Z(e,".subnav"),o=Z(e,"A"),i=Z(e,"subnav-toggle");if(!([P,k].some(t=>E(e,t))&&o&&(u(o,O),O.defaultPrevented))){if(E(e,P)){const i=()=>{y(e,"open-position"),s(e,"out"),o&&(u(o,U),L(o,"aria-expanded","false"))};y(e,P),t&&n?d(n,i):i()}E(e,k)&&(y(e,k),[i,o].forEach(e=>{e&&L(e,"aria-expanded","false")}),o&&u(o,U))}}function H(e){[...e].forEach(G)}function J(e){const{code:t}=e,{activeElement:n}=a(this),o=V(this);if(!o||!n||!this.contains(n))return;const s=z(n,"LI");if(!s)return;const i=W(o),{previousElementSibling:r,nextElementSibling:l}=s,u=z(s,"."+P),d=z(s,"UL"),[f]=N("subnav",s),g=["Space","ArrowDown","ArrowLeft","ArrowRight","ArrowUp"],p=d&&"column"===c(d,"flex-direction"),m=A(s),v=d&&r&&("ArrowUp"===t&&p||t===(m?"ArrowRight":"ArrowLeft")&&!p),b=d&&l&&("ArrowDown"===t&&p||t===(m?"ArrowLeft":"ArrowRight")&&!p);let h=null;if("Escape"===t&&u?(X.call(u),h=u):!i&&f&&"Space"===t&&(E(s,P)?X.call(s):Q.call(s)),v&&s!==d.firstElementChild?h=r:b&&s!==d.lastElementChild&&(h=l),h){const{firstElementChild:e}=h;e&&e.focus()}!i&&g.includes(t)&&e.preventDefault()}function K(e){e.preventDefault();const{target:t}=e,n=this,o=z(n,M+",.navbar"),s=o&&V(o);if(!s)return;const{options:i,navbarToggle:r}=s;if(t===n||n.contains(t)){const e=z(n,"LI")||o,t=z(n,".navbar-toggle")===r?r:Z(e,".subnav-toggle"),a=t===r?null:Z(e,"A"),l=N(k,e);if(E(e,k)){if(a&&(u(a,O),O.defaultPrevented))return;H(l),y(e,k),t&&(L(t,"aria-expanded","false"),t===r&&B(s)),a&&(L(a,"aria-expanded","false"),u(a,U))}else{if(a&&(u(a,I),I.defaultPrevented))return;if(t===r)B(s,!0);else{H(i.toggleSiblings?N(k,e.parentElement):l)}w(e,k),t&&L(t,"aria-expanded","true"),a&&(L(a,"aria-expanded","true"),u(a,j))}}}function Q(){const e=this,t=z(e,M+",.navbar"),i=t&&V(t),r=o(e,"out");if(i&&!W(i)&&(s(e,"out"),!E(e,P)&&!r)){n(e,()=>function(e){const t=Z(e,".subnav"),n=Z(e,"A");if(n&&(u(n,I),I.defaultPrevented))return;w(e,"open-position"),w(e,P);const{parentElement:o}=e;if(o){H([...N(P,o)].filter(t=>t!==e))}t&&d(t,()=>{s(e,"in"),n&&(u(n,j),L(n,"aria-expanded","true"))})}(e),17,"in")}}function X(){const e=this,t=z(e,M+",.navbar"),o=t&&V(t);if(o&&!W(o)&&E(e,P)){s(e,"in");n(e,()=>{H(N("open-position",e)),G(e,!0)},o.options.delay,"out")}}class Y{constructor(e,t){const n=this;var o,s;n.menu=i(o=e)?o:(i(s)?s:a()).querySelector(o);const{menu:r}=n;if(!r)return;const l=V(r);l&&l.dispose(),n.options=function(e,t,n,o){const s={...e.dataset},i={},r={};return p(s).forEach(e=>{const t=o&&e.includes(o)?e.replace(o,"").replace(/[A-Z]/,e=>e.toLowerCase()):e;r[t]=g(s[e])}),p(n).forEach(e=>{n[e]=g(n[e])}),p(t).forEach(o=>{i[o]=o in n?n[o]:o in r?r[o]:"title"===o?((e,t)=>e.getAttribute(t))(e,"title"):t[o]}),i}(r,F,t||{},""),n.items=T("LI",r),n.navbarToggle=null,[n.navbarToggle]=N("navbar-toggle",r),n.listenResize=n.listenResize.bind(n),q(n,!0),h.set(r,"Navbar",n)}get defaults(){return F}get version(){return"3.1.0alpha1"}get name(){return"Navbar"}listenResize(){const e=this;W(e)||(H(N(k,a(e.menu))),B(e))}dispose(){const e=this;H(e.items),q(e),B(e),h.remove(e.menu,"Navbar"),p(e).forEach(t=>{e[t]=null})}}m(Y,{selector:M,init:e=>new Y(e),getInstance:V});function $(e){const{selector:t,init:n}=Y;[...T("*",a(e))].filter(e=>x(e,t)).forEach(n)}document.body?$():document.addEventListener("DOMContentLoaded",$,{once:!0});export{Y as default};
