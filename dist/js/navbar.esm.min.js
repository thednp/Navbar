// Navbar.js v3.1.0alpha1 | thednp Â© 2022 | MIT-License
const e=e=>e&&1===e.nodeType||!1,t=new Map,n=(n,o,i,s)=>{if(e(n))if(s&&s.length){t.has(n)||t.set(n,new Map);t.get(n).set(s,setTimeout(o,i))}else t.set(n,setTimeout(o,i))},o=(n,o)=>{if(!e(n))return null;const i=t.get(n);return o&&o.length&&i&&i.get?i.get(o)||null:i||null},i=(n,o)=>{if(e(n))if(o&&o.length){const e=t.get(n);e&&e.get&&(clearTimeout(e.get(o)),e.delete(o),0===e.size&&t.delete(n))}else clearTimeout(t.get(n)),t.delete(n)},s=e=>e&&[1,2,3,4,5,6,7,8,9,10,11].some(t=>+e.nodeType===t)||!1,r=e=>e&&9===e.nodeType||!1;function a(e){return r(e)?e:s(e)?e.ownerDocument:(t=e)&&"Window"===t.constructor.name?e.document:window.document;var t}function l(e){return e?r(e)?e.defaultView:s(e)?e.ownerDocument.defaultView:e:window}function c(e,t){const n=getComputedStyle(e);return t.includes("--")?n.getPropertyValue(t):n[t]}const u=(e,t)=>e.dispatchEvent(t);function d(e,t){let n=0;const o=new Event("transitionend"),i=function(e){const t=c(e,"transitionProperty"),n=c(e,"transitionDuration"),o=n.includes("ms")?1:1e3,i=t&&"none"!==t?parseFloat(n)*o:0;return Number.isNaN(i)?0:i}(e),s=function(e){const t=c(e,"transitionProperty"),n=c(e,"transitionDelay"),o=n.includes("ms")?1:1e3,i=t&&"none"!==t?parseFloat(n)*o:0;return Number.isNaN(i)?0:i}(e);if(i){const r=o=>{o.target===e&&(t.apply(e,[o]),e.removeEventListener("transitionend",r),n=1)};e.addEventListener("transitionend",r),setTimeout(()=>{n||u(e,o)},i+s+17)}else t.apply(e,[o])}const f={passive:!0};function p(e){return!!["true",!0].includes(e)||!["false",!1].includes(e)&&(""===e||"null"===e?null:""===e||Number.isNaN(+e)?e:+e)}const g=e=>Object.keys(e);const m=(e,t)=>Object.assign(e,t);function v(e,t){const n=new CustomEvent(e,{cancelable:!0,bubbles:!0});return"object"==typeof t&&m(n,t),n}const b=new Map,h={set:(t,n,o)=>{if(!e(t))return;b.has(n)||b.set(n,new Map);b.get(n).set(t,o)},getAllFor:e=>b.get(e)||null,get:(t,n)=>{if(!e(t)||!n)return null;const o=h.getAllFor(n);return t&&o&&o.get(t)||null},remove:(t,n)=>{const o=b.get(n);o&&e(t)&&(o.delete(t),0===o.size&&b.delete(n))}};function w(e,t){e.classList.add(t)}function E(e,t){return e.classList.contains(t)}function y(e,t){e.classList.remove(t)}const A=e=>"rtl"===function(e){return a(e).documentElement}(e).dir,L=(e,t,n)=>e.setAttribute(t,n);function N(e,t){return(s(t)?t:a()).getElementsByClassName(e)}function T(e,t){return(s(t)?t:a()).getElementsByTagName(e)}function z(e,t){return e?e.closest(t)||z(e.getRootNode().host,t):null}function x(e,t){return e.matches(t)}const C={};function D(e){const t=this,{type:n}=e;[...C[n]].forEach(o=>{const[i,s]=o;i===t&&[...s].forEach(t=>{const[o,s]=t;o.apply(i,[e]),s&&s.once&&R(i,n,o,s)})})}const P=(e,t,n,o)=>{C[t]||(C[t]=new Map);const i=C[t];i.has(e)||i.set(e,new Map);const s=i.get(e),{size:r}=s;s.set(n,o),r||e.addEventListener(t,D,o)},R=(e,t,n,o)=>{const i=C[t],s=i&&i.get(e),r=s&&s.get(n),{options:a}=void 0!==r?r:{options:o};s&&s.has(n)&&s.delete(n),!i||s&&s.size||i.delete(e),i&&i.size||delete C[t],s&&s.size||e.removeEventListener(t,D,a)};const S='[data-function="navbar"]',M={breakpoint:768,toggleSiblings:!0,delay:500},k=v("show.navbar"),F=v("shown.navbar"),I=v("hide.navbar"),j=v("hidden.navbar"),O=e=>{return t=e,n="Navbar",h.get(t,n);var t,n};function U(e,t){(t?P:R)(l(e.menu),"resize",e.listenResize,f)}function V(e){const{options:t,menu:n}=e,[o]=N("subnav-toggle",n);return o&&"none"!==c(o,"display")||l(n).innerWidth<t.breakpoint}function B(e,t){const n=t?P:R,{items:o,navbarToggle:i,menu:s}=e;[...o].forEach(e=>{const{lastElementChild:t}=e;t&&E(t,"subnav")&&(n(e,"mouseenter",J),n(e,"mouseleave",K));const[o]=N("subnav-toggle",e);o&&n(o,"click",H)}),n(s,"keydown",G),i&&n(i,"click",H)}function W(e,t){return[...e.children].find(e=>x(e,t))}function q(e,t){const n=W(e,".subnav"),o=W(e,"A"),s=W(e,"subnav-toggle"),r=()=>{y(e,"open-position"),i(e,"out"),o&&(u(o,j),L(o,"aria-expanded","false"))};if(E(e,"open")){if(o&&(u(o,I),I.defaultPrevented))return;y(e,"open"),t&&n?d(n,r):r()}if(E(e,"open-mobile")){if(o&&u(o,I),I.defaultPrevented)return;y(e,"open-mobile"),[s,o].forEach(e=>{e&&L(e,"aria-expanded","false")}),o&&u(o,j)}}function Z(e){[...e].forEach(e=>q(e))}function G(e){const{code:t}=e,{activeElement:n}=a(this),o=O(this);if(!o||!n||!this.contains(n))return;const i=z(n,"LI");if(!i)return;const s=V(o),{previousElementSibling:r,nextElementSibling:l}=i,u=z(i,".open"),d=z(i,"UL"),[f]=N("subnav",i),p=["Space","ArrowDown","ArrowLeft","ArrowRight","ArrowUp"],g=d&&"column"===c(d,"flex-direction"),m=A(i),v=d&&r&&("ArrowUp"===t&&g||t===(m?"ArrowRight":"ArrowLeft")&&!g),b=d&&l&&("ArrowDown"===t&&g||t===(m?"ArrowLeft":"ArrowRight")&&!g);let h=null;if("Escape"===t&&u?(K.call(u),h=u):!s&&f&&"Space"===t&&(E(i,"open")?K.call(i):J.call(i)),v&&i!==d.firstElementChild?h=r:b&&i!==d.lastElementChild&&(h=l),h){const{firstElementChild:e}=h;e&&e.focus()}!s&&p.includes(t)&&e.preventDefault()}function H(e){e.preventDefault();const{target:t}=e,n=this,o=z(n,S+",.navbar"),i=o&&O(o);if(!i)return;const{options:s,navbarToggle:r}=i;if(t===n||n.contains(t)){const e=z(n,"LI")||o,t=z(n,".navbar-toggle")===r?r:W(e,"subnav-toggle"),a=t===r?null:W(e,"A"),l=N("open-mobile",e);if(E(e,"open-mobile")){if(a&&a.dispatchEvent(I),I.defaultPrevented)return;Z(l),y(e,"open-mobile"),t&&(L(t,"aria-expanded","false"),t===r&&U(i)),a&&(L(a,"aria-expanded","false"),a.dispatchEvent(j))}else{if(a&&a.dispatchEvent(k),k.defaultPrevented)return;if(t===r)U(i,!0);else{Z(s.toggleSiblings?N("open-mobile",e.parentElement):l)}w(e,"open-mobile"),t&&L(t,"aria-expanded","true"),a&&(L(a,"aria-expanded","true"),a.dispatchEvent(F))}}}function J(){const e=this,t=z(e,S+",.navbar"),s=t&&O(t),r=o(e,"out");if(s&&!V(s)&&(i(e,"out"),!E(e,"open")&&!r)){n(e,()=>function(e){const t=W(e,".subnav"),n=W(e,"A"),o=()=>{i(e,"in"),n&&(u(n,F),L(n,"aria-expanded","true"))};if(n&&(u(n,k),k.defaultPrevented))return;w(e,"open-position"),w(e,"open");const{parentElement:s}=e;if(s){Z([...N("open",s)].filter(t=>t!==e))}t?d(t,o):o()}(e),17,"in")}}function K(){const e=this,t=z(e,S+",.navbar"),o=t&&O(t);if(o&&!V(o)&&E(e,"open")){i(e,"in");n(e,()=>q(e,!0),o.options.delay,"out")}}class Q{constructor(e,t){const n=this;var o,i;n.menu=s(o=e)?o:(s(i)?i:a()).querySelector(o);const{menu:r}=n;if(!r)return;const l=O(r);l&&l.dispose(),n.options=function(e,t,n,o){const i={...e.dataset},s={},r={};return g(i).forEach(e=>{const t=o&&e.includes(o)?e.replace(o,"").replace(/[A-Z]/,e=>e.toLowerCase()):e;r[t]=p(i[e])}),g(n).forEach(e=>{n[e]=p(n[e])}),g(t).forEach(o=>{s[o]=o in n?n[o]:o in r?r[o]:"title"===o?((e,t)=>e.getAttribute(t))(e,"title"):t[o]}),s}(r,M,t||{},""),n.items=T("LI",r),n.navbarToggle=null,[n.navbarToggle]=N("navbar-toggle",r),n.listenResize=n.listenResize.bind(n),B(n,!0),h.set(r,"Navbar",n)}get defaults(){return M}get version(){return"3.1.0alpha1"}get name(){return"Navbar"}listenResize(){const e=this;V(e)||(Z(N("open-mobile")),U(e))}dispose(){Z(this.items),B(this),U(this),h.remove(this.menu,"Navbar")}}m(Q,{selector:S,init:e=>new Q(e),getInstance:O});function X(e){const{selector:t,init:n}=Q;[...T("*",a(e))].filter(e=>x(e,t)).forEach(n)}document.body?X():document.addEventListener("DOMContentLoaded",X,{once:!0});export{Q as default};
